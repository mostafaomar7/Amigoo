<!-- Hero Section -->
<section class="hero-section min-vh-75">
  <div class="hero-background">
    <div class="hero-pattern"></div>
  </div>
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 hero-image fade-in delay-1">
        <div class="hero-image-wrapper">
          <div class="hero-image-glow"></div>
          <img
            src="assets/img/banner.png"
            alt="Amigo Store"
            class="img-fluid hero-main-image"
            loading="eager"
            onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 400 300%22%3E%3Crect fill=%22%23f0f0f0%22 width=%22400%22 height=%22300%22/%3E%3Ctext fill=%22%23999%22 font-family=%22sans-serif%22 font-size=%2220%22 dy=%2210.5%22 font-weight=%22bold%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22%3EAmigo Store%3C/text%3E%3C/svg%3E'">
          <div class="hero-floating-card hero-card-1">
            <div class="floating-icon">๐</div>
            <div class="floating-text">ุฌูุฏุฉ ููุชุงุฒุฉ</div>
          </div>
          <div class="hero-floating-card hero-card-2">
            <div class="floating-icon">๐</div>
            <div class="floating-text">ุชูุตูู ุณุฑูุน</div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 hero-content fade-in-up">
        <div class="hero-badge fade-in delay-1">
          <span class="badge-icon">โจ</span>
          <span>ููุงุจุณ ุนุงููุฉ ุงูุฌูุฏุฉ</span>
        </div>
        <h1 class="hero-title">
          <span class="hero-title-highlight">ูุฑุญุจุงู ุจู ูู</span>
          <span style="color:#000000 !important;">ูุชุฌุฑ ุฃููุฌู</span>
        </h1>
        <p class="hero-subtitle">
          ุงูุชุดู ุงูููุงุจุณ ุงููููุฒุฉ ูุงูููุชุฌุงุช ุงูุนุงููุฉ ุงูุฌูุฏุฉ. ุชุณูู ุฃุญุฏุซ ุงูุตูุญุงุช ูุงุณุชูุชุน ุจุงูุนุฑูุถ ุงูุญุตุฑูุฉ ูู ูุฌููุนุชูุง ุงููุฎุชุงุฑุฉ.
        </p>
        <div class="hero-cta fade-in delay-2">
          <button class="btn btn-primary btn-hero-primary" (click)="navigateToProducts()">
            <span>ุชุณูู ุงูุขู</span>
            <i class="fas fa-arrow-left ms-2"></i>
          </button>
        </div>
        <div class="hero-stats fade-in delay-3">
          <div class="stat-item">
            <div class="stat-number">1000+</div>
            <div class="stat-label">ุนููู ุณุนูุฏ</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">500+</div>
            <div class="stat-label">ููุชุฌ</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">24/7</div>
            <div class="stat-label">ุฏุนู ููู</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="hero-scroll-indicator">
    <div class="scroll-mouse">
      <div class="scroll-wheel"></div>
    </div>
  </div>
</section>

<!-- Categories Section -->
<section class="categories-section">
  <div class="container">
    <h2 class="section-title fade-in-up">... ูุณููุงูู ููุชุฌุงุชูุง</h2>

    <!-- Loading State -->
    <div *ngIf="loadingCategories" class="categories-slider-wrapper">
      <div class="categories-slider">
        <div class="category-slide" *ngFor="let i of getSkeletonItems()">
          <div class="skeleton-card">
            <div class="skeleton-image"></div>
            <div class="skeleton-text"></div>
            <div class="skeleton-text short"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Categories Slider -->
    <div *ngIf="!loadingCategories && categories.length > 0" class="categories-slider-container">
      <button
        class="slider-nav-btn slider-nav-prev"
        (click)="scrollCategories('prev')"
        [class.disabled]="!canScrollPrev"
        aria-label="Previous categories">
        <i class="fas fa-chevron-left"></i>
      </button>

      <div class="categories-slider-wrapper" #categoriesSlider>
        <div class="categories-slider">
          <div
            class="category-slide"
            *ngFor="let category of categories; trackBy: trackByCategoryId"
            (click)="navigateToCategory(category._id || '')">
            <div class="category-card">
              <div class="category-image-wrapper">
                <img
                  *ngIf="!hasImageError('category-' + category._id)"
                  [src]="getCategoryImageUrl(category)"
                  [alt]="category.name"
                  class="category-image"
                  (error)="onImageError('category-' + category._id)"
                  loading="lazy">
                <div *ngIf="hasImageError('category-' + category._id) || !category.image"
                     class="category-image d-flex align-items-center justify-content-center bg-light">
                  <div class="text-center p-4">
                    <i class="fas fa-image fa-3x text-muted mb-3"></i>
                    <p class="text-muted mb-0">No image available</p>
                  </div>
                </div>
                <div class="category-overlay">
                  <h3 class="category-name">{{ category.name }}</h3>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button
        class="slider-nav-btn slider-nav-next"
        (click)="scrollCategories('next')"
        [class.disabled]="!canScrollNext"
        aria-label="Next categories">
        <i class="fas fa-chevron-right"></i>
      </button>

      <!-- Slider Dots Indicator -->
      <div class="slider-dots" *ngIf="categories.length > 4">
        <span
          *ngFor="let dot of getSliderDots(); let i = index"
          class="slider-dot"
          [class.active]="i === currentSlideIndex"
          (click)="goToSlide(i)"
          [attr.aria-label]="'Go to slide ' + (i + 1)">
        </span>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loadingCategories && categories.length === 0" class="text-center py-5">
      <p class="text-muted">ูุง ููุฌุฏ ุงูุณุงู ูุชุงุญุฉ ูู ุงูููุช ุงูุญุงูู</p>
    </div>
  </div>
</section>

<!-- Featured Products Section -->
<section class="featured-products-section bg-light">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title fade-in-up" style="text-align: center;">ุงูููุชุฌุงุช ุงููููุฒุฉ</h2>
      <button class="btn btn-view-all" (click)="navigateToProducts()">
        ุนุฑุถ ุงููู
        <i class="fas fa-arrow-left ms-2"></i>
      </button>
    </div>

    <!-- Loading State -->
    <div *ngIf="loadingProducts" class="row g-4">
      <div class="col-6 col-md-4 col-lg-3" *ngFor="let i of [1,2,3,4,5,6,7,8]">
        <div class="skeleton-card">
          <div class="skeleton-image"></div>
          <div class="skeleton-text"></div>
          <div class="skeleton-text"></div>
          <div class="skeleton-text short"></div>
        </div>
      </div>
    </div>

    <!-- Products Grid -->
    <div *ngIf="!loadingProducts" class="row g-4">
      <div class="col-6 col-md-4 col-lg-3" *ngFor="let product of getDisplayedProducts(); trackBy: trackByProductId">
        <div class="product-card" (click)="navigateToProduct(product._id)">
          <div class="product-image-wrapper">
            <img
              *ngIf="!hasImageError('product-' + product._id)"
              [src]="getProductImageUrl(product)"
              [alt]="product.title"
              class="product-image"
              (error)="onImageError('product-' + product._id)"
              loading="lazy">
            <div *ngIf="hasImageError('product-' + product._id) || !product.imageCover"
                 class="product-image d-flex align-items-center justify-content-center bg-light">
              <div class="text-center p-4">
                <i class="fas fa-image fa-3x text-muted mb-3"></i>
                <p class="text-muted small mb-0">ูุง ุชูุฌุฏ ุตูุฑุฉ</p>
              </div>
            </div>

            <!-- Discount Badge -->
            <span *ngIf="product.priceAfterDiscount" class="badge-sale" style="color: var(--text-dark) !important;">
              -{{ getDiscountPercentage(product) }}%
            </span>

            <!-- Hover Overlay with Actions -->
            <div class="product-overlay">
              <div class="d-flex gap-2">
                <button
                  class="btn btn-light"
                  (click)="addToCart(product, $event)"
                  [attr.aria-label]="'Add to cart'">
                  <i class="fas fa-shopping-bag"></i>
                </button>
                <button
                  class="btn btn-light"
                  [class.active]="isFavorite(product._id)"
                  (click)="toggleFavorite(product, $event)"
                  [attr.aria-label]="isFavorite(product._id) ? 'Remove from favorites' : 'Add to favorites'">
                  <i class="fas"
                     [ngClass]="{'fa-heart': isFavorite(product._id), 'far fa-heart': !isFavorite(product._id)}"
                     [style.font-weight]="isFavorite(product._id) ? '900' : '400'"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="product-info">
            <h3 class="product-title" [title]="product.title">
              {{ product.title }}
            </h3>
            <div class="product-price">
              <span class="current-price">{{ getProductPrice(product) | currency:'EGP':'symbol':'1.0-0' }}</span>
              <span *ngIf="getOriginalPrice(product)" class="original-price has-discount">
                {{ getOriginalPrice(product) | currency:'EGP':'symbol':'1.0-0' }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Show More Button -->
    <div *ngIf="!loadingProducts && hasMoreProducts()" class="text-center mt-5">
      <button class="btn btn-show-more" (click)="showMoreProducts()">
        <span>ุงุนุฑุถ ุงูุชุฑ</span>
        <i class="fas fa-arrow-left ms-2"></i>
      </button>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loadingProducts && featuredProducts.length === 0" class="text-center py-5">
      <i class="fas fa-box-open fa-4x text-muted mb-3"></i>
      <p class="text-muted mb-3">ูุง ุชูุฌุฏ ููุชุฌุงุช ูุชุงุญุฉ ูู ุงูููุช ุงูุญุงูู</p>
    </div>
  </div>
</section>

<!-- Contact Us Section -->
<section class="contact-section" style="direction: rtl;">
  <div class="container">
    <div class="row align-items-center">
      <!-- Left: Contact Info -->
      <div class="col-lg-5 contact-info-wrapper">
        <div class="contact-info-content">
          <div class="contact-badge">
            <i class="fas fa-envelope"></i>
            <span>ุชูุงุตู ูุนูุง</span>
          </div>
          <h2 class="contact-title">ูุญู ููุง ููุณุงุนุฏุชู</h2>
          <p class="contact-description">
            ูุฏูู ุณุคุงู ุฃู ุงุณุชูุณุงุฑุ ูุญู ููุง ููุณุงุนุฏุชู! ุชูุงุตู ูุนูุง ูุณูุฑุฏ ุนููู ูู ุฃูุฑุจ ููุช ูููู.
          </p>

          <div class="contact-features">
            <div class="contact-feature-item">
              <div class="feature-icon">
                <i class="fas fa-clock"></i>
              </div>
              <div class="feature-content">
                <h4 class="feature-title">ูุชุงุญ 24/7</h4>
                <p class="feature-text">ูุญู ูุชุงุญูู ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ</p>
              </div>
            </div>
            <div class="contact-feature-item">
              <div class="feature-icon">
                <i class="fas fa-reply"></i>
              </div>
              <div class="feature-content">
                <h4 class="feature-title">ุฑุฏ ุณุฑูุน</h4>
                <p class="feature-text">ูุฑุฏ ุนูู ุงุณุชูุณุงุฑุงุชู ุฎูุงู 24 ุณุงุนุฉ</p>
              </div>
            </div>
            <div class="contact-feature-item">
              <div class="feature-icon">
                <i class="fas fa-headset"></i>
              </div>
              <div class="feature-content">
                <h4 class="feature-title">ุฏุนู ููุชุงุฒ</h4>
                <p class="feature-text">ูุฑูู ุฎุฏูุฉ ุนููุงุก ูุญุชุฑู</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: Contact Form -->
      <div class="col-lg-7 contact-form-wrapper">
        <div class="contact-form-card">
          <h3 class="form-title">ุฃุฑุณู ููุง ุฑุณุงูุฉ</h3>
          <p class="form-subtitle">ุงููุฃ ุงููููุฐุฌุ ูุณูุชูุงุตู ูุนู ูุฑูุจุงู</p>

          <form [formGroup]="contactForm" (ngSubmit)="onSubmitContactForm()">
            <!-- Name -->
            <div class="form-group mb-3">
              <label class="form-label" for="contactName">
                ุงูุงุณู ุงููุงูู <span class="text-danger">*</span>
              </label>
              <input
                type="text"
                id="contactName"
                formControlName="name"
                class="form-control"
                [class.is-invalid]="contactForm.get('name')?.invalid && contactForm.get('name')?.touched"
                placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู">
              <div class="invalid-feedback" *ngIf="getContactFieldError('name')">
                {{ getContactFieldError('name') }}
              </div>
            </div>

            <!-- Email -->
            <div class="form-group mb-3">
              <label class="form-label" for="contactEmail">
                ุงูุจุฑูุฏ ุงูุฅููุชุฑููู <span class="text-danger">*</span>
              </label>
              <input
                type="email"
                id="contactEmail"
                formControlName="email"
                class="form-control"
                [class.is-invalid]="contactForm.get('email')?.invalid && contactForm.get('email')?.touched"
                placeholder="example@email.com">
              <div class="invalid-feedback" *ngIf="getContactFieldError('email')">
                {{ getContactFieldError('email') }}
              </div>
            </div>

            <!-- Phone -->
            <div class="form-group mb-3">
              <label class="form-label" for="contactPhone">
                ุฑูู ุงููุงุชู <span class="text-danger">*</span>
              </label>
              <input
                type="tel"
                id="contactPhone"
                formControlName="phone"
                class="form-control"
                [class.is-invalid]="contactForm.get('phone')?.invalid && contactForm.get('phone')?.touched"
                placeholder="ุฑูู ุงููุงุชู">
              <div class="invalid-feedback" *ngIf="getContactFieldError('phone')">
                {{ getContactFieldError('phone') }}
              </div>
            </div>

            <!-- Message -->
            <div class="form-group mb-3">
              <label class="form-label" for="contactMessage">
                ุงูุฑุณุงูุฉ <span class="text-danger">*</span>
              </label>
              <textarea
                id="contactMessage"
                formControlName="message"
                class="form-control"
                [class.is-invalid]="contactForm.get('message')?.invalid && contactForm.get('message')?.touched"
                rows="6"
                placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..."></textarea>
              <div class="invalid-feedback" *ngIf="getContactFieldError('message')">
                {{ getContactFieldError('message') }}
              </div>
            </div>
            <!-- Submit Button -->
            <button
              type="submit"
              class="btn btn-primary btn-submit-contact w-100"
              [disabled]="contactSubmitting || contactForm.invalid">
              <span *ngIf="!contactSubmitting">
                <i class="fas fa-paper-plane me-2"></i>
                ุฅุฑุณุงู ุงูุฑุณุงูุฉ
              </span>
              <span *ngIf="contactSubmitting">
                <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                ุฌุงุฑู ุงูุฅุฑุณุงู...
              </span>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
