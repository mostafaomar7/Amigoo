<!-- Settings Management Page -->
<div class="container-fluid py-4">
  <!-- Header -->
  <div class="mb-4">
    <h1 class="h2 mb-1 text-white">Settings Management</h1>
    <p class="text-white mb-0">Manage your site settings and configuration</p>
  </div>

  <!-- Settings Form Card -->
  <div class="card">
    <div class="card-body">
      <!-- Loading State -->
      <div *ngIf="isLoading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="text-muted mt-3">Loading settings...</p>
      </div>

      <!-- Settings Form -->
      <form
        *ngIf="!isLoading"
        [formGroup]="settingsForm"
        (ngSubmit)="saveSettings()"
        class="settings-form"
      >
        <div class="row">
          <!-- Contact Information Section -->
          <div class="col-12 mb-4">
            <h4 class="text-dark mb-3">
              <i class="fas fa-envelope me-2"></i>Contact Information
            </h4>
          </div>

          <!-- Contact Email -->
          <div class="col-md-6 mb-3">
            <label for="contact_email" class="form-label">
              Contact Email <span class="text-danger">*</span>
            </label>
            <input
              type="email"
              id="contact_email"
              class="form-control"
              [class.is-invalid]="hasFieldError('contact_email')"
              formControlName="contact_email"
              placeholder="Enter contact email"
            />
            <div *ngIf="hasFieldError('contact_email')" class="invalid-feedback">
              {{ getFieldError("contact_email") }}
            </div>
          </div>

          <!-- Contact Phone -->
          <div class="col-md-6 mb-3">
            <label for="contact_phone" class="form-label">
              Contact Phone <span class="text-danger">*</span>
            </label>
            <input
              type="text"
              id="contact_phone"
              class="form-control"
              [class.is-invalid]="hasFieldError('contact_phone')"
              formControlName="contact_phone"
              placeholder="Enter 11-digit phone number"
              maxlength="11"
            />
            <div *ngIf="hasFieldError('contact_phone')" class="invalid-feedback">
              {{ getFieldError("contact_phone") }}
            </div>
            <small class="form-text text-muted">Phone number must be exactly 11 digits</small>
          </div>

          <!-- Address -->
          <div class="col-12 mb-3">
            <label for="address" class="form-label">
              <i class="fas fa-map-marker-alt me-2"></i>Address
            </label>
            <input
              type="text"
              id="address"
              class="form-control"
              [class.is-invalid]="hasFieldError('address')"
              formControlName="address"
              placeholder="Enter address"
              maxlength="500"
            />
            <div *ngIf="hasFieldError('address')" class="invalid-feedback">
              {{ getFieldError("address") }}
            </div>
            <small class="form-text text-muted">Maximum 500 characters</small>
          </div>
        </div>

        <!-- Shipping Section -->
        <div class="row mt-4">
          <div class="col-12 mb-4">
            <h4 class="text-dark mb-3">
              <i class="fas fa-shipping-fast me-2"></i>Shipping Configuration
            </h4>
          </div>

          <!-- Shipping Cost -->
          <div class="col-md-6 mb-3">
            <label for="shipping_cost" class="form-label">
              Shipping Cost <span class="text-danger">*</span>
            </label>
            <input
              type="number"
              id="shipping_cost"
              class="form-control"
              [class.is-invalid]="hasFieldError('shipping_cost')"
              formControlName="shipping_cost"
              placeholder="0.00"
              min="0"
              step="0.01"
            />
            <div *ngIf="hasFieldError('shipping_cost')" class="invalid-feedback">
              {{ getFieldError("shipping_cost") }}
            </div>
          </div>
        </div>

        <!-- Social Media Section -->
        <div class="row mt-4">
          <div class="col-12 mb-4">
            <h4 class="text-dark mb-3">
              <i class="fas fa-share-alt me-2"></i>Social Media Links
            </h4>
          </div>

          <!-- Facebook -->
          <div class="col-md-6 mb-3">
            <label for="facebook" class="form-label">
              <i class="fab fa-facebook-f me-2"></i>Facebook
            </label>
            <input
              type="url"
              id="facebook"
              class="form-control"
              [class.is-invalid]="hasFieldError('facebook')"
              formControlName="facebook"
              placeholder="https://facebook.com/yourpage"
            />
            <div *ngIf="hasFieldError('facebook')" class="invalid-feedback">
              {{ getFieldError("facebook") }}
            </div>
          </div>

          <!-- Instagram -->
          <div class="col-md-6 mb-3">
            <label for="instagram" class="form-label">
              <i class="fab fa-instagram me-2"></i>Instagram
            </label>
            <input
              type="url"
              id="instagram"
              class="form-control"
              [class.is-invalid]="hasFieldError('instagram')"
              formControlName="instagram"
              placeholder="https://instagram.com/yourpage"
            />
            <div *ngIf="hasFieldError('instagram')" class="invalid-feedback">
              {{ getFieldError("instagram") }}
            </div>
          </div>

          <!-- WhatsApp -->
          <div class="col-md-6 mb-3">
            <label for="whatsapp" class="form-label">
              <i class="fab fa-whatsapp me-2"></i>WhatsApp
            </label>
            <input
              type="text"
              id="whatsapp"
              class="form-control"
              [class.is-invalid]="hasFieldError('whatsapp')"
              formControlName="whatsapp"
              placeholder="Enter 11-digit WhatsApp number"
              maxlength="11"
            />
            <div *ngIf="hasFieldError('whatsapp')" class="invalid-feedback">
              {{ getFieldError("whatsapp") }}
            </div>
            <small class="form-text text-muted">WhatsApp number must be exactly 11 digits</small>
          </div>

          <!-- TikTok -->
          <div class="col-md-6 mb-3">
            <label for="tiktok" class="form-label">
              <i class="fab fa-tiktok me-2"></i>TikTok
            </label>
            <input
              type="url"
              id="tiktok"
              class="form-control"
              [class.is-invalid]="hasFieldError('tiktok')"
              formControlName="tiktok"
              placeholder="https://tiktok.com/@username"
            />
            <div *ngIf="hasFieldError('tiktok')" class="invalid-feedback">
              {{ getFieldError("tiktok") }}
            </div>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="row mt-4">
          <div class="col-12">
            <div class="d-flex flex-column flex-md-row gap-2 justify-content-end">
              <button
                type="button"
                class="btn btn-secondary"
                (click)="resetSettings()"
                [disabled]="isResetting || isSaving"
              >
                <i class="fas fa-undo me-2" *ngIf="!isResetting"></i>
                <span *ngIf="isResetting" class="spinner-border spinner-border-sm me-2" role="status">
                  <span class="visually-hidden">Loading...</span>
                </span>
                {{ isResetting ? 'Resetting...' : 'Reset to Default' }}
              </button>
              <button
                type="submit"
                class="btn btn-primary"
                [disabled]="!settingsForm.valid || isSaving || isResetting"
              >
                <i class="fas fa-save me-2" *ngIf="!isSaving"></i>
                <span *ngIf="isSaving" class="spinner-border spinner-border-sm me-2" role="status">
                  <span class="visually-hidden">Loading...</span>
                </span>
                {{ isSaving ? 'Saving...' : 'Save Settings' }}
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
