{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet BoyFriendComponent = class BoyFriendComponent {\n  add() {\n    this.item.emit({\n      item: this.selectedCategory\n    });\n  }\n  ngOnChanges(changes) {\n    if (changes['selectedCategory']) {\n      this.loadProductsForCategory(this.selectedCategory); // جلب الـ products عندما يتغير الـ category\n    }\n\n    console.log(this.selectedCategory);\n  }\n  addToCart(product, amount) {\n    if (!this.selectedSizes[product._id]) {\n      alert('يرجى اختيار المقاس أولاً!');\n      return;\n    }\n    if (\"cart\" in localStorage) {\n      this.cardproduct = JSON.parse(localStorage.getItem(\"cart\"));\n      let exist = this.cardproduct.find(itemm => itemm._id == product._id);\n      if (exist) {\n        alert(\"Your Product is Already in Cart\");\n        window.location.href = '/cart';\n      } else {\n        this.cardproduct.push(Object.assign(Object.assign({}, product), {\n          selectedSize: this.selectedSizes[product._id]\n        }));\n        localStorage.setItem(\"cart\", JSON.stringify(this.cardproduct));\n        alert(\"تم اضافة المنتج بنجاح\");\n        window.location.href = '/cart';\n      }\n    } else {\n      this.cardproduct.push(Object.assign(Object.assign({}, product), {\n        selectedSize: this.selectedSizes[product._id]\n      }));\n      localStorage.setItem(\"cart\", JSON.stringify(this.cardproduct));\n    }\n    if (!this.selectedSizes[product._id]) {\n      alert('يرجى اختيار المقاس أولاً!');\n      return;\n    }\n  }\n  loadProductsForCategory(category) {\n    // طلب الـ products بناءً على الـ category\n    this.serv.getproductybycatgory(category).subscribe(data => {\n      this.alldata = data; // فرضًا البيانات جاية في شكل array\n      this.alldata = Object.values(this.alldata);\n      console.log(this.alldata);\n    });\n  }\n  constructor(serv, route, env) {\n    this.serv = serv;\n    this.route = route;\n    this.env = env;\n    this.data = {};\n    this.item = new EventEmitter();\n    this.addtocart = false;\n    this.amount = 0;\n    this.selectedCategory = ''; // استقبال الـ category من الـ parent\n    // هنعرض فيها الـ products\n    this.alldata = {};\n    this.allproduct = {};\n    this.allcategory = {};\n    this.cardproduct = [];\n    this.selectedSizes = {}; // تخزين الحجم لكل منتج على حدة\n  }\n  // getdata(){\n  //   this.serv.getdata().subscribe((data:any)=>{\n  //     this.alldata=data;\n  //     this.alldata = Object.values(this.alldata);  // تحويل الكائن إلى مصفوفة\n  //   }, error=>{\n  //     alert(error)\n  //   })\n  // }\n  getcategory() {\n    this.serv.getcatgory().subscribe(data => {\n      this.allcategory = data;\n      this.allcategory = Object.values(this.allcategory);\n    });\n  }\n  ngOnInit() {\n    // this.getdata()\n    // this.getcategory();\n  }\n};\n__decorate([Input()], BoyFriendComponent.prototype, \"data\", void 0);\n__decorate([Output()], BoyFriendComponent.prototype, \"item\", void 0);\n__decorate([Input()], BoyFriendComponent.prototype, \"selectedCategory\", void 0);\nBoyFriendComponent = __decorate([Component({\n  selector: 'app-boy-friend',\n  standalone: true,\n  imports: [CommonModule, RouterModule, FormsModule],\n  templateUrl: './boy-friend.component.html',\n  styleUrls: ['./boy-friend.component.css']\n})], BoyFriendComponent);\nexport { BoyFriendComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}