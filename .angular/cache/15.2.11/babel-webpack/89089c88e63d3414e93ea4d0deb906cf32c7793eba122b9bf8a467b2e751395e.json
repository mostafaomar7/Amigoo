{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services/api.service\";\nimport * as i2 from \"../../../../services/notification.service\";\nimport * as i3 from \"@angular/forms\";\nexport let SettingsComponent = /*#__PURE__*/(() => {\n  class SettingsComponent {\n    constructor(apiService, notificationService, fb) {\n      this.apiService = apiService;\n      this.notificationService = notificationService;\n      this.fb = fb;\n      this.settings = null;\n      this.isLoading = false;\n      this.isSaving = false;\n      this.settingsForm = this.fb.group({\n        site_name: ['', Validators.required],\n        contact_email: ['', [Validators.required, Validators.email]],\n        contact_phone: ['', Validators.required],\n        site_description: [''],\n        currency: ['', Validators.required],\n        currency_symbol: ['', Validators.required],\n        shipping_cost: [0, [Validators.required, Validators.min(0)]],\n        free_shipping_threshold: [0, [Validators.required, Validators.min(0)]],\n        facebook: [''],\n        twitter: [''],\n        instagram: [''],\n        linkedin: ['']\n      });\n    }\n    ngOnInit() {\n      this.loadSettings();\n    }\n    loadSettings() {\n      this.isLoading = true;\n      this.apiService.getSingle('/settings').subscribe({\n        next: response => {\n          this.settings = response.data;\n          if (this.settings) {\n            this.populateForm(this.settings);\n          }\n          this.isLoading = false;\n        },\n        error: error => {\n          console.error('Error loading settings:', error);\n          this.isLoading = false;\n          if (error.status === 404) {\n            this.notificationService.info('Info', 'Settings not found. Create new settings.');\n          } else {\n            this.notificationService.error('Error', 'Failed to load settings');\n          }\n        }\n      });\n    }\n    populateForm(settings) {\n      var _a, _b, _c, _d;\n      this.settingsForm.patchValue({\n        site_name: settings.site_name,\n        contact_email: settings.contact_email,\n        contact_phone: settings.contact_phone,\n        site_description: settings.site_description || '',\n        currency: settings.currency,\n        currency_symbol: settings.currency_symbol,\n        shipping_cost: settings.shipping_cost,\n        free_shipping_threshold: settings.free_shipping_threshold,\n        facebook: ((_a = settings.social_media) === null || _a === void 0 ? void 0 : _a.facebook) || '',\n        twitter: ((_b = settings.social_media) === null || _b === void 0 ? void 0 : _b.twitter) || '',\n        instagram: ((_c = settings.social_media) === null || _c === void 0 ? void 0 : _c.instagram) || '',\n        linkedin: ((_d = settings.social_media) === null || _d === void 0 ? void 0 : _d.linkedin) || ''\n      });\n    }\n    saveSettings() {\n      if (this.settingsForm.valid) {\n        this.isSaving = true;\n        const formValue = this.settingsForm.value;\n        const settingsData = {\n          site_name: formValue.site_name,\n          contact_email: formValue.contact_email,\n          contact_phone: formValue.contact_phone,\n          site_description: formValue.site_description,\n          currency: formValue.currency,\n          currency_symbol: formValue.currency_symbol,\n          shipping_cost: formValue.shipping_cost,\n          free_shipping_threshold: formValue.free_shipping_threshold,\n          social_media: {\n            facebook: formValue.facebook,\n            twitter: formValue.twitter,\n            instagram: formValue.instagram,\n            linkedin: formValue.linkedin\n          }\n        };\n        if (this.settings) {\n          this.apiService.put('/settings', '', settingsData).subscribe({\n            next: response => {\n              this.notificationService.success('Success', 'Settings updated successfully');\n              this.loadSettings();\n              this.isSaving = false;\n            },\n            error: error => {\n              var _a;\n              console.error('Error updating settings:', error);\n              this.notificationService.error('Error', ((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Failed to update settings');\n              this.isSaving = false;\n            }\n          });\n        } else {\n          this.apiService.post('/settings', settingsData).subscribe({\n            next: response => {\n              this.notificationService.success('Success', 'Settings created successfully');\n              this.loadSettings();\n              this.isSaving = false;\n            },\n            error: error => {\n              var _a;\n              console.error('Error creating settings:', error);\n              this.notificationService.error('Error', ((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Failed to create settings');\n              this.isSaving = false;\n            }\n          });\n        }\n      }\n    }\n    resetSettings() {\n      if (confirm('Are you sure you want to reset settings to defaults? This action cannot be undone.')) {\n        this.apiService.post('/settings/reset', {}).subscribe({\n          next: response => {\n            this.notificationService.success('Success', 'Settings reset successfully');\n            this.loadSettings();\n          },\n          error: error => {\n            var _a;\n            console.error('Error resetting settings:', error);\n            this.notificationService.error('Error', ((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Failed to reset settings');\n          }\n        });\n      }\n    }\n  }\n  SettingsComponent.ɵfac = function SettingsComponent_Factory(t) {\n    return new (t || SettingsComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.NotificationService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n  };\n  SettingsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SettingsComponent,\n    selectors: [[\"app-settings\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 6,\n    vars: 0,\n    consts: [[1, \"min-h-screen\", \"bg-gray-50\", \"dark:bg-gray-900\"], [1, \"p-4\", \"lg:p-6\"], [1, \"text-2xl\", \"lg:text-3xl\", \"font-bold\", \"text-gray-900\", \"dark:text-white\", \"mb-6\"], [1, \"text-gray-600\", \"dark:text-gray-400\"]],\n    template: function SettingsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n        i0.ɵɵtext(3, \"Settings Management\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\", 3);\n        i0.ɵɵtext(5, \"Settings management functionality coming soon...\");\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    dependencies: [CommonModule, ReactiveFormsModule]\n  });\n  return SettingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}