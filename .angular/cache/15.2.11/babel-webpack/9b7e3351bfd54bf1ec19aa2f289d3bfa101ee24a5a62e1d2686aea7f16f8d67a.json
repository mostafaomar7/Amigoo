{"ast":null,"code":"import { NavigationEnd, RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { NavbarComponent } from '../shared/navbar/navbar.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../sharedservice/opencart.service\";\nimport * as i2 from \"../sharedservice/apifunction.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../sharedservice/cart.service\";\nimport * as i5 from \"@angular/common\";\nfunction CargoComponent_div_0_div_8_label_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\", 21)(1, \"input\", 22);\n    i0.ɵɵlistener(\"ngModelChange\", function CargoComponent_div_0_div_8_label_15_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const item_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.selectedSizes[item_r2._id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const s_r5 = ctx.$implicit;\n    const item_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", \"size_\" + item_r2._id)(\"ngModel\", ctx_r3.selectedSizes[item_r2._id])(\"value\", s_r5);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r5);\n  }\n}\nfunction CargoComponent_div_0_div_8_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function CargoComponent_div_0_div_8_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const item_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.addToCart(item_r2, ctx_r10.amount));\n    });\n    i0.ɵɵtext(1, \"Add To Cart\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CargoComponent_div_0_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 10)(2, \"div\", 11)(3, \"i\", 12);\n    i0.ɵɵlistener(\"click\", function CargoComponent_div_0_div_8_Template_i_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.addToCart(item_r2, ctx_r13.amount));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"i\", 13);\n    i0.ɵɵlistener(\"click\", function CargoComponent_div_0_div_8_Template_i_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.addTostar(item_r2, ctx_r15.amount));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"a\")(6, \"div\", 14);\n    i0.ɵɵelement(7, \"img\", 15);\n    i0.ɵɵelementStart(8, \"p\", 16);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 16);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\", 16);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 17);\n    i0.ɵɵtemplate(15, CargoComponent_div_0_div_8_label_15_Template, 4, 4, \"label\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 19);\n    i0.ɵɵtemplate(17, CargoComponent_div_0_div_8_button_17_Template, 2, 0, \"button\", 20);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/product/\", item_r2._id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"https://amigoapi.mosalam.com/uploads/products/\" + item_r2.imageCover, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", item_r2.price, \"EGP\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", item_r2.size);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.addtocart);\n  }\n}\nfunction CargoComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"section\", 4)(2, \"div\", 5)(3, \"h4\", 6);\n    i0.ɵɵtext(4, \"The Most Popular\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h1\", 6);\n    i0.ɵɵtext(6, \"Explore Amigo Product\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 7);\n    i0.ɵɵtemplate(8, CargoComponent_div_0_div_8_Template, 18, 7, \"div\", 8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.alldata[0]);\n  }\n}\nexport let CargoComponent = /*#__PURE__*/(() => {\n  class CargoComponent {\n    // add(){\n    //   this.item.emit({item:this.data , quantity: this.amount});\n    // }\n    constructor(cdRef, openser, serv, route, router, cartService) {\n      this.cdRef = cdRef;\n      this.openser = openser;\n      this.serv = serv;\n      this.route = route;\n      this.router = router;\n      this.cartService = cartService;\n      this.selectedCategory = null;\n      this.alldata = {};\n      this.data = {};\n      this.cardproduct = [];\n      this.starproduct = [];\n      this.addtocart = false;\n      this.amount = 1;\n      this.selectedSizes = {}; // تخزين الحجم لكل منتج على حدة\n      this.router.events.subscribe(event => {\n        if (event instanceof NavigationEnd && event.url === '/cart') {\n          window.location.reload();\n        }\n      });\n    }\n    getdata() {\n      this.serv.getdata().subscribe(data => {\n        this.alldata = data;\n        this.alldata = Object.values(this.alldata);\n      }, error => {\n        alert(error);\n      });\n    }\n    addtocartt(event) {\n      console.log(event);\n    }\n    addToCart(product, amount) {\n      if (!this.selectedSizes[product._id]) {\n        alert('يرجى اختيار المقاس أولاً!');\n        return;\n      }\n      if (\"cart\" in localStorage) {\n        this.cardproduct = JSON.parse(localStorage.getItem(\"cart\"));\n        let exist = this.cardproduct.find(itemm => itemm._id == product._id);\n        if (exist) {\n          alert(\"Your Product is Already in Cart\");\n          window.location.href = '/cart';\n        } else {\n          this.cardproduct.push(Object.assign(Object.assign({}, product), {\n            selectedSize: this.selectedSizes[product._id]\n          }));\n          localStorage.setItem(\"cart\", JSON.stringify(this.cardproduct));\n          alert(\"تم اضافة المنتج بنجاح\");\n          window.location.href = '/cart';\n        }\n      } else {\n        this.cardproduct.push(Object.assign(Object.assign({}, product), {\n          selectedSize: this.selectedSizes[product._id]\n        }));\n        localStorage.setItem(\"cart\", JSON.stringify(this.cardproduct));\n      }\n      if (!this.selectedSizes[product._id]) {\n        alert('يرجى اختيار المقاس أولاً!');\n        return;\n      }\n    }\n    updateCartUI() {\n      if (\"cart\" in localStorage) {\n        this.cardproduct = JSON.parse(localStorage.getItem(\"cart\"));\n      } else {\n        this.cardproduct = [];\n      }\n      this.cdRef.detectChanges(); // ✅ إجبار Angular على تحديث الواجهة\n    }\n\n    addTostar(product, amount) {\n      if (\"star\" in localStorage) {\n        this.starproduct = JSON.parse(localStorage.getItem(\"star\"));\n        let exist = this.starproduct.find(itemm => itemm._id == product._id);\n        if (exist) {\n          alert(\"Your Product is Already in Favorite\");\n        } else {\n          this.starproduct.push(product);\n          localStorage.setItem(\"star\", JSON.stringify(this.starproduct));\n          alert(\"تم اضافة المنتج بنجاح\");\n          window.location.reload();\n        }\n      } else {\n        this.starproduct.push(product);\n        localStorage.setItem(\"star\", JSON.stringify(this.starproduct));\n      }\n      console.log('العربة بعد الإضافة:', this.starproduct);\n    }\n    // openCart(product: any) {\n    //   this.openser.addToCart(product);\n    //   this.openser.toggleCart(); // فتح القائمة بعد الإضافة\n    // }\n    onCategoryChange(category) {\n      console.log(\"Received category in CargoComponent:\", category);\n      this.selectedCategory = category;\n    }\n    ngOnInit() {\n      this.getdata();\n      this.updateCartUI();\n    }\n  }\n  CargoComponent.ɵfac = function CargoComponent_Factory(t) {\n    return new (t || CargoComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.OpencartService), i0.ɵɵdirectiveInject(i2.ApifunctionService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.CartService));\n  };\n  CargoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CargoComponent,\n    selectors: [[\"app-cargo\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 4,\n    vars: 2,\n    consts: [[\"class\", \"container cargo\", 4, \"ngIf\"], [3, \"categorySelected\"], [3, \"selectedCategory\", \"item\"], [1, \"container\", \"cargo\"], [1, \"clothes\"], [1, \"title\"], [1, \"text-center\", \"fw-bold\"], [1, \"row\"], [\"class\", \"col-lg-4 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-4\", \"mb-3\"], [1, \"card-shirt\", \"card\", \"border-2\"], [1, \"icon\"], [\"id\", \"cart-btn\", 1, \"fas\", \"fa-shopping-cart\", 3, \"click\"], [\"id\", \"star-btn\", 1, \"fas\", \"fa-solid\", \"fa-star\", 3, \"click\"], [1, \"pointer\", 2, \"cursor\", \"pointer\", 3, \"routerLink\"], [\"alt\", \"\", 1, \"w-100\", 3, \"src\"], [1, \"fs-4\", \"fw-bold\"], [1, \"row\", \"justify-content-center\", \"mb-3\"], [\"class\", \"size-box mx-1\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"text-center\"], [\"class\", \"btn btn-dark text-white w-100 fs-4\", 3, \"click\", 4, \"ngIf\"], [1, \"size-box\", \"mx-1\"], [\"type\", \"radio\", 3, \"name\", \"ngModel\", \"value\", \"ngModelChange\"], [1, \"btn\", \"btn-dark\", \"text-white\", \"w-100\", \"fs-4\", 3, \"click\"]],\n    template: function CargoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CargoComponent_div_0_Template, 9, 1, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\")(2, \"app-navbar\", 1);\n        i0.ɵɵlistener(\"categorySelected\", function CargoComponent_Template_app_navbar_categorySelected_2_listener($event) {\n          return ctx.selectedCategory = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"app-boy-friend\", 2);\n        i0.ɵɵlistener(\"item\", function CargoComponent_Template_app_boy_friend_item_3_listener($event) {\n          return ctx.addtocartt($event);\n        });\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.selectedCategory);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"selectedCategory\", ctx.selectedCategory);\n      }\n    },\n    dependencies: [CommonModule, i5.NgForOf, i5.NgIf, RouterModule, i3.RouterLink, NavbarComponent],\n    styles: [\".cargo[_ngcontent-%COMP%]{margin-top:180px}.card[_ngcontent-%COMP%]{height:auto;margin-bottom:20px;text-align:center;height:570px}.card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:5px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.card[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px;margin-bottom:8px;border-bottom:1px solid black}.card[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.3rem}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}a[_ngcontent-%COMP%]{color:#111}.card[_ngcontent-%COMP%]{position:relative}.icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;font-size:30px;transform:translate(-50%)}.size-selection[_ngcontent-%COMP%]{margin-bottom:10px}.sizes-container[_ngcontent-%COMP%]{display:flex;gap:10px}.size-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:2px solid #ccc;border-radius:5px;cursor:pointer;font-size:15px;font-weight:700;text-align:center;background-color:#fff}.size-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.size-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{pointer-events:none}.size-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-radius:5px;padding:5px}@media (max-width:767px){.cargo[_ngcontent-%COMP%]{margin-top:120px}}\"]\n  });\n  return CargoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}