{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../sharedservice/apifunction.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction BoyFriendComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"h4\", 3);\n    i0.ɵɵtext(2, \"The Most Popular\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h1\", 3);\n    i0.ɵɵtext(4, \"Explore Amigo Product\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction BoyFriendComponent_div_1_div_8_label_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\", 20)(1, \"input\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function BoyFriendComponent_div_1_div_8_label_15_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const item_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.selectedSizes[item_r3._id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const s_r6 = ctx.$implicit;\n    const item_r3 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", \"size_\" + item_r3._id)(\"ngModel\", ctx_r4.selectedSizes[item_r3._id])(\"value\", s_r6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r6);\n  }\n}\nfunction BoyFriendComponent_div_1_div_8_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function BoyFriendComponent_div_1_div_8_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const item_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.addToCart(item_r3, ctx_r11.amount));\n    });\n    i0.ɵɵtext(1, \"Add To Cart\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BoyFriendComponent_div_1_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"a\")(3, \"div\", 10);\n    i0.ɵɵelement(4, \"img\", 11);\n    i0.ɵɵelementStart(5, \"p\", 12);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 12);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 12);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 13)(12, \"i\", 14);\n    i0.ɵɵlistener(\"click\", function BoyFriendComponent_div_1_div_8_Template_i_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.addToCart(item_r3, ctx_r14.amount));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"i\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 16);\n    i0.ɵɵtemplate(15, BoyFriendComponent_div_1_div_8_label_15_Template, 4, 4, \"label\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 18);\n    i0.ɵɵtemplate(17, BoyFriendComponent_div_1_div_8_button_17_Template, 2, 0, \"button\", 19);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/product/\", item_r3._id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"https://amigoapi.mosalam.com/uploads/products/\" + item_r3.imageCover, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r3.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r3.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", item_r3.price, \"EGP\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", item_r3.size);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.addtocart);\n  }\n}\nfunction BoyFriendComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"section\", 5)(2, \"div\", 2)(3, \"h4\", 3);\n    i0.ɵɵtext(4, \"The Most Popular\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h1\", 3);\n    i0.ɵɵtext(6, \"Explore Amigo Product\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 6);\n    i0.ɵɵtemplate(8, BoyFriendComponent_div_1_div_8_Template, 18, 7, \"div\", 7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.alldata[1]);\n  }\n}\nexport let BoyFriendComponent = /*#__PURE__*/(() => {\n  class BoyFriendComponent {\n    add() {\n      this.item.emit({\n        item: this.selectedCategory\n      });\n    }\n    ngOnChanges(changes) {\n      if (changes['selectedCategory']) {\n        this.loadProductsForCategory(this.selectedCategory); // جلب الـ products عندما يتغير الـ category\n      }\n\n      console.log(this.selectedCategory);\n    }\n    addToCart(product, amount) {\n      if (!this.selectedSizes[product._id]) {\n        alert('يرجى اختيار المقاس أولاً!');\n        return;\n      }\n      if (\"cart\" in localStorage) {\n        this.cardproduct = JSON.parse(localStorage.getItem(\"cart\"));\n        let exist = this.cardproduct.find(itemm => itemm._id == product._id);\n        if (exist) {\n          alert(\"Your Product is Already in Cart\");\n          window.location.href = '/cart';\n        } else {\n          this.cardproduct.push(Object.assign(Object.assign({}, product), {\n            selectedSize: this.selectedSizes[product._id]\n          }));\n          localStorage.setItem(\"cart\", JSON.stringify(this.cardproduct));\n          alert(\"تم اضافة المنتج بنجاح\");\n          window.location.href = '/cart';\n        }\n      } else {\n        this.cardproduct.push(Object.assign(Object.assign({}, product), {\n          selectedSize: this.selectedSizes[product._id]\n        }));\n        localStorage.setItem(\"cart\", JSON.stringify(this.cardproduct));\n      }\n      if (!this.selectedSizes[product._id]) {\n        alert('يرجى اختيار المقاس أولاً!');\n        return;\n      }\n    }\n    loadProductsForCategory(category) {\n      // طلب الـ products بناءً على الـ category\n      this.serv.getproductybycatgory(category).subscribe(data => {\n        this.alldata = data; // فرضًا البيانات جاية في شكل array\n        this.alldata = Object.values(this.alldata);\n        console.log(this.alldata);\n      });\n    }\n    constructor(serv, route) {\n      this.serv = serv;\n      this.route = route;\n      this.data = {};\n      this.item = new EventEmitter();\n      this.addtocart = false;\n      this.amount = 0;\n      this.selectedCategory = ''; // استقبال الـ category من الـ parent\n      // هنعرض فيها الـ products\n      this.alldata = {};\n      this.allproduct = {};\n      this.allcategory = {};\n      this.cardproduct = [];\n      this.selectedSizes = {}; // تخزين الحجم لكل منتج على حدة\n    }\n    // getdata(){\n    //   this.serv.getdata().subscribe((data:any)=>{\n    //     this.alldata=data;\n    //     this.alldata = Object.values(this.alldata);  // تحويل الكائن إلى مصفوفة\n    //   }, error=>{\n    //     alert(error)\n    //   })\n    // }\n    getcategory() {\n      this.serv.getcatgory().subscribe(data => {\n        this.allcategory = data;\n        this.allcategory = Object.values(this.allcategory);\n      });\n    }\n    ngOnInit() {\n      // this.getdata()\n      // this.getcategory();\n    }\n  }\n  BoyFriendComponent.ɵfac = function BoyFriendComponent_Factory(t) {\n    return new (t || BoyFriendComponent)(i0.ɵɵdirectiveInject(i1.ApifunctionService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  BoyFriendComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BoyFriendComponent,\n    selectors: [[\"app-boy-friend\"]],\n    inputs: {\n      data: \"data\",\n      selectedCategory: \"selectedCategory\"\n    },\n    outputs: {\n      item: \"item\"\n    },\n    standalone: true,\n    features: [i0.ɵɵNgOnChangesFeature, i0.ɵɵStandaloneFeature],\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"title\", 4, \"ngIf\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"title\"], [1, \"text-center\", \"fw-bold\"], [1, \"container\"], [1, \"clothes\"], [1, \"row\"], [\"class\", \"col-lg-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-4\"], [1, \"card-shirt\", \"card\", \"border-2\", \"mb-2\"], [1, \"pointer\", 2, \"cursor\", \"pointer\", 3, \"routerLink\"], [\"alt\", \"\", 1, \"w-100\", 3, \"src\"], [1, \"fs-4\", \"fw-bold\"], [1, \"icon\"], [\"id\", \"cart-btn\", 1, \"fas\", \"fa-shopping-cart\", 3, \"click\"], [\"id\", \"star-btn\", 1, \"fas\", \"fa-solid\", \"fa-star\"], [1, \"row\", \"justify-content-center\"], [\"class\", \"size-box \", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"text-center\"], [\"class\", \"btn btn-dark text-white w-100 fs-4\", 3, \"click\", 4, \"ngIf\"], [1, \"size-box\"], [\"type\", \"radio\", 3, \"name\", \"ngModel\", \"value\", \"ngModelChange\"], [1, \"btn\", \"btn-dark\", \"text-white\", \"w-100\", \"fs-4\", 3, \"click\"]],\n    template: function BoyFriendComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, BoyFriendComponent_div_0_Template, 5, 0, \"div\", 0);\n        i0.ɵɵtemplate(1, BoyFriendComponent_div_1_Template, 9, 1, \"div\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedCategory);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedCategory);\n      }\n    },\n    dependencies: [CommonModule, i3.NgForOf, i3.NgIf, RouterModule, i2.RouterLink],\n    styles: [\".card[_ngcontent-%COMP%]{width:100%}.clothes[_ngcontent-%COMP%]{margin-top:120px}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px;margin-bottom:8px;border-bottom:1px solid black}.card[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.3rem}a[_ngcontent-%COMP%]{color:#000;text-align:center}.card[_ngcontent-%COMP%]{position:relative}.icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;font-size:30px;transform:translate(-50%)}.size-selection[_ngcontent-%COMP%]{margin-bottom:10px}.sizes-container[_ngcontent-%COMP%]{display:flex;gap:10px}.size-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:2px solid #ccc;border-radius:5px;cursor:pointer;font-size:15px;font-weight:700;text-align:center;background-color:#fff}.size-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.size-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{pointer-events:none}.size-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-radius:5px;padding:5px}@media (max-width:991px){.clothes[_ngcontent-%COMP%]{margin-top:90px}}\"]\n  });\n  return BoyFriendComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}