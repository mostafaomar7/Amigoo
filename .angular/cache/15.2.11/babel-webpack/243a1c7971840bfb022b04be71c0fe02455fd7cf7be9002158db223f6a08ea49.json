{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { RouterModule } from \"@angular/router\";\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { BoyFriendComponent } from '../../boy-friend/boy-friend.component';\nlet NavbarComponent = class NavbarComponent {\n  constructor(openser, cartService, serv, router) {\n    this.openser = openser;\n    this.cartService = cartService;\n    this.serv = serv;\n    this.router = router;\n    this.nav = {};\n    this.itemnav = new EventEmitter();\n    // DOM element references\n    this.navbar = null;\n    this.searchForm = null;\n    this.cartItem = null;\n    this.starItem = null;\n    this.cartItems = []; // Store the cart items\n    this.alldata = [];\n    this.allcatgory = [];\n    this.allproduct = [];\n    this.categorySelected = new EventEmitter();\n    this.cartproduct = [];\n    this.starproduct = [];\n    this.total = 0;\n  }\n  onCategoryChange(category) {\n    this.categorySelected.emit(category);\n    console.log(category);\n  }\n  getstarproducts() {\n    if (\"star\" in localStorage) {\n      this.starproduct = JSON.parse(localStorage.getItem(\"star\"));\n    }\n    this.gettotalprice();\n  }\n  getcartproducts() {\n    if (\"cart\" in localStorage) {\n      this.cartproduct = JSON.parse(localStorage.getItem(\"cart\"));\n    }\n    this.gettotalprice();\n  }\n  gettotalprice() {\n    this.total = 0;\n    for (let x in this.cartproduct) {\n      this.total += this.cartproduct[x].price * this.cartproduct[x].quantity;\n    }\n  }\n  increase(index) {\n    this.cartproduct[index].quantity++;\n    localStorage.setItem(\"cart\", JSON.stringify(this.cartproduct));\n    this.gettotalprice();\n  }\n  decrease(index) {\n    if (this.cartproduct[index].quantity > 1) {\n      this.cartproduct[index].quantity--;\n      localStorage.setItem(\"cart\", JSON.stringify(this.cartproduct));\n      this.gettotalprice();\n    }\n  }\n  detectedchange() {\n    localStorage.setItem(\"cart\", JSON.stringify(this.cartproduct));\n    this.gettotalprice();\n    localStorage.setItem(\"star\", JSON.stringify(this.starproduct));\n  }\n  delete(index) {\n    this.cartproduct.splice(index, 1);\n    localStorage.setItem(\"cart\", JSON.stringify(this.cartproduct));\n    this.gettotalprice();\n    this.starproduct.splice(index, 1);\n    localStorage.setItem(\"star\", JSON.stringify(this.starproduct));\n  }\n  ClearAllProducts() {\n    this.cartproduct.splice(0, this.cartproduct.length);\n    localStorage.setItem(\"cart\", JSON.stringify(this.cartproduct));\n    this.gettotalprice();\n  }\n  getdata() {\n    this.serv.getcatgory().subscribe(data => {\n      this.allcatgory = Object.values(data); // تحويل الكائن إلى مصفوفة\n    }, error => {\n      alert(error);\n    });\n  }\n  getproductcatgory(id) {\n    this.serv.getproductybycatgory(id).subscribe(res => {\n      this.alldata = res;\n      this.alldata = Object.values(this.alldata);\n      console.log(this.alldata);\n    });\n  }\n  // filltercategory(event){\n  //     let value = event.target.value ;\n  //     this.getproductcatgory(value);\n  // }\n  goToParentPage() {\n    this.router.navigate(['/cargo']); // الانتقال إلى صفحة الـ cargo\n  }\n\n  ngOnInit() {\n    this.cartItem = document.querySelector('.cart-items-container');\n    console.log('Navbar Element:', this.navbar);\n    // this.openser.cartToggle$.subscribe((toggle) => {\n    //   if (toggle && this.cartItem) {\n    //     this.cartItem.classList.add('active'); // فتح القائمة عند إضافة منتج\n    //   }\n    // });\n    this.getdata();\n    this.getcartproducts();\n    this.getstarproducts();\n    console.log(this.alldata);\n    // Initialize the DOM elements\n    this.navbar = document.querySelector('.navbar');\n    this.searchForm = document.querySelector('.search-form');\n    this.cartItem = document.querySelector('.cart-items-container');\n    this.starItem = document.querySelector('.star-items-container');\n    // Add event listeners to buttons\n    // Handle window scroll\n    window.addEventListener('scroll', this.closeAllMenus.bind(this));\n    this.cartService.getCartItems().subscribe(items => {\n      this.cartItems = items;\n    });\n  }\n  ngOnDestroy() {\n    // Clean up event listeners when the component is destroyed\n    window.removeEventListener('scroll', this.closeAllMenus.bind(this));\n  }\n  toggleNavbar() {\n    if (this.navbar) {\n      this.navbar.classList.toggle('active');\n    }\n    this.closeOtherMenus(this.searchForm, this.cartItem, this.starItem);\n  }\n  toggleSearchForm() {\n    if (this.searchForm) {\n      this.searchForm.classList.toggle('active');\n    }\n    this.closeOtherMenus(this.navbar, this.cartItem, this.starItem);\n  }\n  toggleCartItem() {\n    if (this.cartItem) {\n      this.cartItem.classList.toggle('active');\n    }\n    this.closeOtherMenus(this.navbar, this.searchForm, this.starItem);\n  }\n  togglestarItem() {\n    if (this.starItem) {\n      this.starItem.classList.toggle('active');\n    }\n    this.closeOtherMenus(this.navbar, this.searchForm, this.cartItem);\n  }\n  closeOtherMenus(...elements) {\n    elements.forEach(el => {\n      if (el) el.classList.remove('active');\n    });\n  }\n  closeAllMenus() {\n    this.closeOtherMenus(this.navbar, this.searchForm, this.cartItem, this.starItem);\n  }\n};\n__decorate([Input()], NavbarComponent.prototype, \"nav\", void 0);\n__decorate([Output()], NavbarComponent.prototype, \"itemnav\", void 0);\n__decorate([Output()], NavbarComponent.prototype, \"categorySelected\", void 0);\nNavbarComponent = __decorate([Component({\n  selector: 'app-navbar',\n  standalone: true,\n  imports: [CommonModule, RouterModule, FormsModule, BoyFriendComponent],\n  templateUrl: './navbar.component.html',\n  styleUrls: ['./navbar.component.css']\n})], NavbarComponent);\nexport { NavbarComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}