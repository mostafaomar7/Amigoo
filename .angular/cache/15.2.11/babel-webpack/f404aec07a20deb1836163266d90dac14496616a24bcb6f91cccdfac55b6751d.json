{"ast":null,"code":"import { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { NavbarComponent } from '../shared/navbar/navbar.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/apifunction.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction ShirtComponent_div_8_label_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\", 16)(1, \"input\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function ShirtComponent_div_8_label_15_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const item_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.selectedSizes[item_r1._id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const s_r4 = ctx.$implicit;\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", \"size_\" + item_r1._id)(\"ngModel\", ctx_r2.selectedSizes[item_r1._id])(\"value\", s_r4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r4);\n  }\n}\nfunction ShirtComponent_div_8_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ShirtComponent_div_8_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const item_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.addToCart(item_r1, ctx_r9.amount));\n    });\n    i0.ɵɵtext(1, \"Add To Cart\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ShirtComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"a\")(3, \"div\", 7)(4, \"i\", 8);\n    i0.ɵɵlistener(\"click\", function ShirtComponent_div_8_Template_i_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.addToCart(item_r1, ctx_r12.amount));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"i\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 10);\n    i0.ɵɵelement(7, \"img\", 11);\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 12);\n    i0.ɵɵtemplate(15, ShirtComponent_div_8_label_15_Template, 4, 4, \"label\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 14);\n    i0.ɵɵtemplate(17, ShirtComponent_div_8_button_17_Template, 2, 0, \"button\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/product/\", item_r1._id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"https://amigoapi.mosalam.com/uploads/products/\" + item_r1.imageCover, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", item_r1.price, \"EGP\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", item_r1.size);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.addtocart);\n  }\n}\nexport let ShirtComponent = /*#__PURE__*/(() => {\n  class ShirtComponent {\n    constructor(serv, route) {\n      this.serv = serv;\n      this.route = route;\n      this.alldata = {};\n      this.cardproduct = [];\n      this.addtocart = false;\n      this.amount = 0;\n      this.selectedSizes = {}; // تخزين الحجم لكل منتج على حدة\n      this.id = this.route.snapshot.paramMap.get('_id');\n    }\n    getdata() {\n      this.serv.getproductybycatgory(this.id).subscribe(data => {\n        this.alldata = data;\n        this.alldata = Object.values(this.alldata);\n        console.log(this.alldata);\n      }, error => {\n        alert(error);\n      });\n    }\n    addToCart(product, amount) {\n      if (!this.selectedSizes[product._id]) {\n        alert('يرجى اختيار المقاس أولاً!');\n        return;\n      }\n      if (\"cart\" in localStorage) {\n        this.cardproduct = JSON.parse(localStorage.getItem(\"cart\"));\n        let exist = this.cardproduct.find(itemm => itemm._id == product._id);\n        if (exist) {\n          alert(\"Your Product is Already in Cart\");\n          window.location.href = '/cart';\n        } else {\n          this.cardproduct.push(Object.assign(Object.assign({}, product), {\n            selectedSize: this.selectedSizes[product._id]\n          }));\n          localStorage.setItem(\"cart\", JSON.stringify(this.cardproduct));\n          alert(\"تم اضافة المنتج بنجاح\");\n          window.location.href = '/cart';\n        }\n      } else {\n        this.cardproduct.push(Object.assign(Object.assign({}, product), {\n          selectedSize: this.selectedSizes[product._id]\n        }));\n        localStorage.setItem(\"cart\", JSON.stringify(this.cardproduct));\n      }\n      if (!this.selectedSizes[product._id]) {\n        alert('يرجى اختيار المقاس أولاً!');\n        return;\n      }\n    }\n    ngOnInit() {\n      this.getdata();\n    }\n  }\n  ShirtComponent.ɵfac = function ShirtComponent_Factory(t) {\n    return new (t || ShirtComponent)(i0.ɵɵdirectiveInject(i1.ApifunctionService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  ShirtComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShirtComponent,\n    selectors: [[\"app-shirt\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 9,\n    vars: 1,\n    consts: [[1, \"clothes\"], [1, \"text-center\", \"fw-bold\"], [1, \"container\"], [1, \"row\"], [\"class\", \"col-lg-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-4\"], [1, \"card-shirt\", \"card\", \"border-2\"], [1, \"icon\"], [\"id\", \"cart-btn\", 1, \"fas\", \"fa-shopping-cart\", 3, \"click\"], [\"id\", \"star-btn\", 1, \"fas\", \"fa-solid\", \"fa-star\"], [1, \"pointer\", 2, \"cursor\", \"pointer\", 3, \"routerLink\"], [\"alt\", \"\", 1, \"w-100\", 3, \"src\"], [1, \"row\", \"mb-2\", \"justify-content-center\"], [\"class\", \"size-box\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"text-center\"], [\"class\", \"btn btn-dark text-white w-100 fs-4\", 3, \"click\", 4, \"ngIf\"], [1, \"size-box\"], [\"type\", \"radio\", 3, \"name\", \"ngModel\", \"value\", \"ngModelChange\"], [1, \"btn\", \"btn-dark\", \"text-white\", \"w-100\", \"fs-4\", 3, \"click\"]],\n    template: function ShirtComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\");\n        i0.ɵɵelementStart(1, \"section\", 0)(2, \"h4\", 1);\n        i0.ɵɵtext(3, \"The Most Popular\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"h1\", 1);\n        i0.ɵɵtext(5, \"Explore Amigo Product\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 2)(7, \"div\", 3);\n        i0.ɵɵtemplate(8, ShirtComponent_div_8_Template, 18, 7, \"div\", 4);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.alldata[1]);\n      }\n    },\n    dependencies: [CommonModule, i3.NgForOf, i3.NgIf, RouterModule, i2.RouterLink, NavbarComponent],\n    styles: [\".clothes[_ngcontent-%COMP%]{margin-top:170px}.card-shirt[_ngcontent-%COMP%]{height:auto;overflow:hidden;margin-bottom:10px;position:relative}.icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;font-size:30px;transform:translate(-50%)}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px;margin-bottom:8px;border-bottom:1px solid black}.card[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.3rem}a[_ngcontent-%COMP%]{color:#000;text-align:center}.size-selection[_ngcontent-%COMP%]{margin-bottom:10px}.sizes-container[_ngcontent-%COMP%]{display:flex;gap:10px}.size-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:2px solid #ccc;border-radius:5px;cursor:pointer;font-size:15px;font-weight:700;text-align:center;background-color:#fff}.size-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.size-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{pointer-events:none}.size-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-radius:5px;padding:5px}@media (max-width:768px){.clothes[_ngcontent-%COMP%]{margin-top:110px}}\"]\n  });\n  return ShirtComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}