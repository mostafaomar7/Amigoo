{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"../../services/notification.service\";\nimport * as i3 from \"@angular/forms\";\nexport let ContactFormsComponent = /*#__PURE__*/(() => {\n  class ContactFormsComponent {\n    constructor(apiService, notificationService, fb) {\n      this.apiService = apiService;\n      this.notificationService = notificationService;\n      this.fb = fb;\n      this.contactForms = [];\n      this.currentPage = 1;\n      this.itemsPerPage = 10;\n      this.totalItems = 0;\n      this.totalPages = 0;\n      this.isLoading = false;\n      this.showReplyModal = false;\n      this.showDeleteModal = false;\n      this.selectedForm = null;\n      this.filterReplied = '';\n      this.replyForm = this.fb.group({\n        adminReply: ['', [Validators.required, Validators.maxLength(1000)]]\n      });\n    }\n    ngOnInit() {\n      this.loadContactForms();\n    }\n    loadContactForms() {\n      this.isLoading = true;\n      const params = {\n        page: this.currentPage,\n        limit: this.itemsPerPage,\n        sort: '-createdAt'\n      };\n      this.apiService.getPaginated('/submit', params).subscribe({\n        next: response => {\n          var _a;\n          let forms = response.data || [];\n          if (this.filterReplied === 'replied') {\n            forms = forms.filter(form => form.isReplied);\n          } else if (this.filterReplied === 'unreplied') {\n            forms = forms.filter(form => !form.isReplied);\n          }\n          this.contactForms = forms;\n          this.totalItems = response.results || 0;\n          this.totalPages = ((_a = response.pagination) === null || _a === void 0 ? void 0 : _a.numberOfPages) || 0;\n          this.isLoading = false;\n        },\n        error: error => {\n          console.error('Error loading contact forms:', error);\n          this.isLoading = false;\n          this.notificationService.error('Error', 'Failed to load contact forms');\n        }\n      });\n    }\n    onFilter() {\n      this.currentPage = 1;\n      this.loadContactForms();\n    }\n    goToPage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n        this.loadContactForms();\n      }\n    }\n    showReplyFormModal(form) {\n      this.selectedForm = form;\n      this.replyForm.patchValue({\n        adminReply: form.adminReply || ''\n      });\n      this.showReplyModal = true;\n    }\n    submitReply() {\n      if (this.replyForm.valid && this.selectedForm) {\n        const replyData = {\n          adminReply: this.replyForm.value.adminReply\n        };\n        this.apiService.postCustom(`/submit/${this.selectedForm._id}/reply`, replyData).subscribe({\n          next: response => {\n            this.notificationService.success('Success', 'Reply sent successfully');\n            this.showReplyModal = false;\n            this.loadContactForms();\n          },\n          error: error => {\n            var _a;\n            console.error('Error sending reply:', error);\n            this.notificationService.error('Error', ((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Failed to send reply');\n          }\n        });\n      }\n    }\n    deleteForm(form) {\n      if (confirm(`Are you sure you want to delete this contact form from ${form.name}?`)) {\n        this.apiService.delete('/submit', form._id).subscribe({\n          next: response => {\n            this.notificationService.success('Success', 'Contact form deleted successfully');\n            this.loadContactForms();\n          },\n          error: error => {\n            var _a;\n            console.error('Error deleting contact form:', error);\n            this.notificationService.error('Error', ((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Failed to delete contact form');\n          }\n        });\n      }\n    }\n    closeModals() {\n      this.showReplyModal = false;\n      this.showDeleteModal = false;\n      this.selectedForm = null;\n    }\n  }\n  ContactFormsComponent.ɵfac = function ContactFormsComponent_Factory(t) {\n    return new (t || ContactFormsComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.NotificationService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n  };\n  ContactFormsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ContactFormsComponent,\n    selectors: [[\"app-contact-forms\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 6,\n    vars: 0,\n    consts: [[1, \"min-h-screen\", \"bg-gray-50\", \"dark:bg-gray-900\"], [1, \"p-4\", \"lg:p-6\"], [1, \"text-2xl\", \"lg:text-3xl\", \"font-bold\", \"text-gray-900\", \"dark:text-white\", \"mb-6\"], [1, \"text-gray-600\", \"dark:text-gray-400\"]],\n    template: function ContactFormsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n        i0.ɵɵtext(3, \"Contact Forms Management\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\", 3);\n        i0.ɵɵtext(5, \"Contact forms management functionality coming soon...\");\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    dependencies: [CommonModule, ReactiveFormsModule]\n  });\n  return ContactFormsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}