{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let NotificationService = /*#__PURE__*/(() => {\n  class NotificationService {\n    constructor() {\n      this.notificationsSubject = new BehaviorSubject([]);\n      this.notifications$ = this.notificationsSubject.asObservable();\n      this.recentNotifications = new Map(); // Track recent notifications to prevent duplicates\n      this.DUPLICATE_THRESHOLD = 2000; // 2 seconds threshold for duplicates\n    }\n    /**\n     * Show success notification\n     */\n    success(title, message, duration = 5000) {\n      this.addNotification({\n        id: this.generateId(),\n        type: 'success',\n        title,\n        message,\n        duration,\n        timestamp: new Date()\n      });\n    }\n    /**\n     * Show error notification\n     */\n    error(title, message, duration = 7000) {\n      this.addNotification({\n        id: this.generateId(),\n        type: 'error',\n        title,\n        message,\n        duration,\n        timestamp: new Date()\n      });\n    }\n    /**\n     * Show info notification\n     */\n    info(title, message, duration = 5000) {\n      this.addNotification({\n        id: this.generateId(),\n        type: 'info',\n        title,\n        message,\n        duration,\n        timestamp: new Date()\n      });\n    }\n    /**\n     * Show warning notification\n     */\n    warning(title, message, duration = 6000) {\n      this.addNotification({\n        id: this.generateId(),\n        type: 'warning',\n        title,\n        message,\n        duration,\n        timestamp: new Date()\n      });\n    }\n    /**\n     * Add notification to the list\n     * Prevents duplicate notifications with same type, title, and message\n     */\n    addNotification(notification) {\n      const currentNotifications = this.notificationsSubject.value;\n      // Create a unique key for this notification content\n      const notificationKey = `${notification.type}|${notification.title}|${notification.message}`;\n      const now = Date.now();\n      // Check if a notification with the same content already exists in current list\n      const existsInList = currentNotifications.some(n => n.type === notification.type && n.title === notification.title && n.message === notification.message);\n      // Check if same notification was shown recently (within threshold)\n      const recentTimestamp = this.recentNotifications.get(notificationKey);\n      const isRecentDuplicate = recentTimestamp && now - recentTimestamp < this.DUPLICATE_THRESHOLD;\n      // Only add if it's not a duplicate (neither in list nor recent)\n      if (!existsInList && !isRecentDuplicate) {\n        // Update recent notifications map\n        this.recentNotifications.set(notificationKey, now);\n        // Clean up old entries from map (older than threshold)\n        this.cleanupRecentNotifications(now);\n        // Add notification\n        this.notificationsSubject.next([...currentNotifications, notification]);\n        // Auto remove notification after duration\n        if (notification.duration) {\n          setTimeout(() => {\n            this.removeNotification(notification.id);\n          }, notification.duration);\n        }\n      }\n    }\n    /**\n     * Clean up old entries from recent notifications map\n     */\n    cleanupRecentNotifications(now) {\n      for (const [key, timestamp] of this.recentNotifications.entries()) {\n        if (now - timestamp >= this.DUPLICATE_THRESHOLD) {\n          this.recentNotifications.delete(key);\n        }\n      }\n    }\n    /**\n     * Remove notification by ID\n     */\n    removeNotification(id) {\n      const currentNotifications = this.notificationsSubject.value;\n      this.notificationsSubject.next(currentNotifications.filter(notification => notification.id !== id));\n    }\n    /**\n     * Clear all notifications\n     */\n    clearAll() {\n      this.notificationsSubject.next([]);\n    }\n    /**\n     * Generate unique ID\n     */\n    generateId() {\n      return Math.random().toString(36).substr(2, 9);\n    }\n  }\n  NotificationService.ɵfac = function NotificationService_Factory(t) {\n    return new (t || NotificationService)();\n  };\n  NotificationService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: NotificationService,\n    factory: NotificationService.ɵfac,\n    providedIn: 'root'\n  });\n  return NotificationService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}